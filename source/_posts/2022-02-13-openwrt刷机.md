---
title: openwrtåˆ·æœº
date: 2022-02-13 01:18:16
tags:
- openwrt
categories:
- å¦‚ä½•å®ç°ç½‘ç»œè‡ªç”±
---

ä»‹ç»äº†ä»ç¡¬ä»¶é€‰æ‹©åˆ°åˆ·æœºæ•´ä¸ªè¿‡ç¨‹
<!-- more -->

## Openwrtç¡¬ä»¶é€‰æ‹©

å¦‚ä½•é€‰æ‹©ä¸€ä¸ªå¯ä»¥åˆ·openwrtçš„è·¯ç”±å™¨ï¼Ÿ

- [è€æˆ¿å­WiFiå¸ƒç½‘æ”»ç•¥ ç¯‡ä¸‰åå…«ï¼šWiFi 6 æ¢…æ—æˆ–openwrtå›ºä»¶è·¯ç”±å™¨å…¥æ‰‹æŒ‡å—_è·¯ç”±å™¨_ä»€ä¹ˆå€¼å¾—ä¹° (smzdm.com)](https://post.smzdm.com/p/awznd6qg/)
- [è€æˆ¿å­WiFiå¸ƒç½‘æ”»ç•¥ ç¯‡äºŒåå››ï¼šä¸æ¼æ²¹çš„è·¯ç”±å™¨ä¸æ˜¯å¥½çŸ¿æœºï¼ŒçŸ¿æ¸£è·¯ç”±å™¨ç›˜ç‚¹_è·¯ç”±å™¨_ä»€ä¹ˆå€¼å¾—ä¹° (smzdm.com)](https://post.smzdm.com/p/apzkqlrx/)
- æè·¯ç”±ã€æ–°è·¯ç”±ï¼š[æœºçš‡ï¼å‡ ç§é«˜æ€§ä»·æ¯”çŸ¿æ¸£è·¯ç”±å™¨æ¯”è¾ƒ-æ–°æ‰‹å…¥é—¨åŠå…¶å®ƒ(ç¡¬ä»¶)-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/thread-8097191-1-1.html)

###  å°ç±³è·¯ç”±å™¨å‹å·æ€»ç»“

#### CPUåˆ†ç±»

- mt7621å‹å·
  - R3Gï¼šå’¸é±¼50å…ƒå·¦å³ï¼Œæœ‰USB3.0æ¥å£ï¼Œ128MBçš„flashã€‚
  - 4Aåƒå…†ç‰ˆï¼šå’¸é±¼70å…ƒå·¦å³ï¼Œå¤–è§‚ç®€çº¦æ¼‚äº®ï¼Œ16MB NOR flashæœ‰ç‚¹å°ã€‚
  - C660xï¼šå’¸é±¼100å¤šï¼Œæ”¯æŒwifi6
- é«˜é€šå‹å·
  - **ç›®å‰(22.03)åªæœ‰AX6Sæ˜¯å—openwrtå®˜æ–¹æ”¯æŒçš„**ï¼ŒAX6, AX3600æœ‰ç¬¬ä¸‰æ–¹æ”¯æŒã€‚AX5ç­‰å…¶ä½™æœªæ”¯æŒ
    - ä¸èƒ½åˆ·å¥½åƒæ˜¯linux kernelè¿˜ä¸æ”¯æŒé«˜é€šçš„IPQ SoCã€‚
    - Bç«™çœ‹åˆ°è¯´AX5åˆ·openwrtéœ€è¦ç¡¬æ”¹å†…å­˜ä¸º1Gï¼Œå¥½åƒè¯´é«˜é€šçš„wifié©±åŠ¨éå¸¸è€—å†…å­˜
  - AX6Sï¼š220å·¦å³
  - AX6ï¼š250-300å·¦å³

#### å°ç±³ç³»åˆ—äº§å“

- çº¢ç±³AX5ï¼Œå°ç±³AX1800æ¢çš®
  - IPQ6000, 4æ ¸A53@1.2Ghzï¼š[[OpenWrt Wiki\] Xiaomi AX1800 (AX5/RA67)](https://openwrt.org/inbox/toh/xiaomi/xiaomi_ax1800)

- **çº¢ç±³AX6**ï¼Œå°ç±³AX3600æ¢çš®
  - AX6, **IPQ8071A**@1.4GHz, 512(ram) + 128ï¼š[[OpenWrt Wiki] Xiaomi Redmi AX6 Wi-Fi 6 Mesh Router](https://openwrt.org/inbox/toh/xiaomi/xiaomi_redmi_ax6_ax3000)
  - AX3600, IPQ8071A, 512 + 256ï¼š[[OpenWrt Wiki] Xiaomi AX3600](https://openwrt.org/inbox/toh/xiaomi/xiaomi_ax3600)
  - å¯¹æ¯”ï¼š[çº¢ç±³AX6æ‹†æœºï¼Œæ—§æ¬¾WIFI6æ— çº¿è·¯ç”±å™¨-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/11176.html)
- AX3000
  - **çº¢ç±³AX3000ï¼ˆæ¯”è¾ƒå¸¸è§ï¼‰**ï¼ŒIPQ5000ï¼šåŒæ ¸A53@1.0GHz, 256(ram) + 128ï¼š[Redmiè·¯ç”±å™¨AX3000ç«‹å³è´­ä¹°-å°ç±³å•†åŸ](https://www.mi.com/shop/buy/detail?product_id=14538)
  - å°ç±³AX3000ï¼šIPQ5000ï¼šåŒæ ¸A53@1.0GHz, 256(ram) + 128ï¼š[å°ç±³è·¯ç”±å™¨AX3000ç«‹å³è´­ä¹°-å°ç±³å•†åŸ (mi.com)](https://www.mi.com/shop/buy/detail?product_id=14790)
  - çº¢ç±³AX3000æ¨¡å…·å’ŒAX6Sä¸€æ ·ï¼Œä¸ºç™½è‰²ã€‚å°ç±³AX3000ä¸ºé»‘è‰²å››æ£±æŸ±ã€‚
- AX5400
  - çº¢ç±³AX5400ï¼ŒIPQ5018ï¼šåŒæ ¸A53@1.0GHzï¼Œ512(ram) + 128ï¼š[çº¢ç±³AX5400åƒå…†ç‰ˆæ‹†æœºï¼Œçœ‹çœ‹ä¸ç”µç«ç‰ˆæœ‰ä»€ä¹ˆå·®åˆ«-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/19451.html)
- AX6000
  - å°ç±³AX6000
    - IPQ5018, 2æ ¸A53@1.0Ghz, 512(ram) + 128
    - ä½¿ç”¨çš„SoC IPQ5018ä¸ºé«˜é€šæ²‰æµ¸å¼å®¶åº­è”ç½‘å¹³å°ï¼Œä¸å¦‚é«˜é€šä¸“ä¸šè”ç½‘å¹³å°çš„IPQ8071Aï¼ˆAX3600ä¸Šçš„ï¼‰
  - **çº¢ç±³AX6000ï¼ˆå¾ˆå¼ºï¼‰**
    - **MT7986A**, 4æ ¸A53@2.0Ghz, 512(ram) + 128ï¼š[[OpenWrt Wiki\] Xiaomi Redmi AX6000](https://openwrt.org/toh/xiaomi/redmi_ax6000)
    - [çº¢ç±³AX6000æ‹†æœºï¼Œæœ€ä¾¿å®œçš„å››æ ¸2.0GHz-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/19676.html)

![image-20221029213022447](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/image-20221029213022447.png)

å‚è€ƒ
- [(33 å°ç§ä¿¡ / 71 æ¡æ¶ˆæ¯) è·¯ç”±å™¨çº¢ç±³ax3000å’Œçº¢ç±³ax6é€‰æ‹©å“ªä¸ª? - çŸ¥ä¹ (zhihu.com)](https://www.zhihu.com/question/474579126)
- å°ç±³openwrté¡µé¢ï¼š[[OpenWrt Wiki] Xiaomi](https://openwrt.org/toh/hwdata/xiaomi/start)
- å¸¸è§MediaTek SoCï¼š[MediaTek - WikiDevi.Wi-Cat.RU](https://wikidevi.wi-cat.ru/MediaTek)

### 2023 wifi6äº§å“

ç°åœ¨éœ€æ±‚wifi6ï¼Œä¸”ä¿¡å·è¦†ç›–å¹¿
- å°ç±³wr30uï¼šè¿è¥å•†å®šåˆ¶ç‰ˆ
- 360 T7ï¼šå’Œä¸Šè€…ç¡¬ä»¶ä¸€æ‘¸ä¸€æ ·ã€‚12v 1A

wr30u: wifi6: [å°ç±³WR30Uæ— çº¿è·¯ç”±å™¨æ‹†æœº AX3000è”é€šå®šåˆ¶ç‰ˆ-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/23700.html)
[2023å¹´æ”¯æŒåˆ·æœºçš„è·¯ç”±å™¨å¤§å…¨ï¼ˆå»ºè®®æ”¶è—ï¼‰ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/640643641)

- AX1800ï¼šcr660x
- AX3000ï¼šcr880xï¼š135

[618 æƒ³ä¹°å°è·¯ç”±å™¨æ±‚æ¨è - V2EX](https://www.v2ex.com/t/948845)
150çš„T7 512æ”¹ï¼š[WR30Uè·¯ç”±åˆ°äº†éšæ‰‹æµ‹æµ‹ - ï¼°ï¼£æ•°ç  - Stage1st - stage1/s1 æ¸¸æˆåŠ¨æ¼«è®ºå› (saraba1st.com)](https://www.saraba1st.com/2b/thread-2141173-1-1.html)

### CPUå¯¹æ¯”

å‚è€ƒï¼š

- [[è½¬è´´\] æ— çº¿è·¯ç”±å™¨CPUæµ…æ MT7621Aã€ BCM47189 åˆ°åº•è°å¼ºï¼Ÿ-æ–°æ‰‹å…¥é—¨åŠå…¶å®ƒ(ç¡¬ä»¶)-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/thread-216888-1-1.html)

- æ ‘è“æ´¾ç³»åˆ—å¤„ç†å™¨ï¼š[Raspberry Pi Documentation - Processors](https://www.raspberrypi.com/documentation/computers/processors.html)
  - Raspberry Pi 2 Model Bï¼š BCM2836(quad-core Cortex-A7 )
  - Raspberry Pi 3 Model Bï¼šBCM2837( quad-core Cortex-A53@1.2)
    - 50% faster than the Raspberry Pi 2.
  - Raspberry Pi 3 Models A+, B+: BCM2837B0(quad-core Cortex-A53@1.4)
    - 17% faster than the original Raspberry Pi 3
  - Raspberry Pi 4 Model B: BCM2837(quad-core Cortex-A72@1.5 GHz)
    - 50% faster than the Raspberry Pi 3B+

- ARMæ ¸å¯¹æ¯”ï¼š[List of ARM processors - Wikipedia](https://en.wikipedia.org/wiki/List_of_ARM_processors)
  - Cortex-A7: 1.9 DMIPS/MHz per core
  - A53: 2.3 DMIPS/MHz
  - A72: 6.3-7.3 DMIPS/MHz
- MIPSæ ¸ï¼š[MIPS Classic Processor Cores - Imagination Technologies](https://www.mips.com/products/classic/)
  - 1004K: 1.6 DMIPS/MHz
- 74k: 1.93 DMIPS/MHzï¼šCSACè·¯ç”±å™¨ï¼š71
  
- [newifi3-d2-firmware/README.md at master Â· sawaYch/newifi3-d2-firmware (github.com)](https://github.com/sawaYch/newifi3-d2-firmware/blob/master/README.md)


## åˆ·æœºè¿‡ç¨‹æ€»ç»“

ä»¥çº¢ç±³AC2100å¯èƒ½çš„åˆ·æœºä¸ºä¾‹ï¼Œæ¶µç›–äº†openwrtçš„å„ç§æƒ…å†µï¼šåˆ·breedï¼Œæ¢å¤ï¼Œä¸´æ—¶é•œåƒ

- **å»ºè®®ç›´æ¥ä½¿ç”¨å®˜æ–¹openwrté•œåƒ + å®˜æ–¹å®‰è£…æ–¹å¼ã€‚å‡ æ¬¡ä½¿ç”¨breedéƒ½é‡åˆ°äº†é—®é¢˜ï¼Œè€Œå°ç±³å®˜æ–¹æ¢å¤å·¥å…·ä¹ŸæŒºå¥½ç”¨çš„ã€‚**

- ç¬¬ä¸€æ¬¡è‡ªå·±åˆ·æœºçº¢ç±³AC2100[[è®°å½•çº¢ç±³AC2100æŠ˜è…¾]]ï¼Œä¸€å¼ ç²¾åå›¾

  ![image-20210622145337241](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/image-20210622145337241.png)

- è·¯ç”±å™¨åˆ·å‡ºé—®é¢˜ï¼Œä¿®å¤ç»éªŒã€‚çŸ¥é“äº†å¤‡ä»½çš„é‡è¦æ€§[[è®°å½•è®°ä¸€æ¬¡è·¯ç”±å™¨åˆ·å‡ºé—®é¢˜ä¿®å¤è¿‡ç¨‹]]

## å°ç±³è·¯ç”±å™¨æ•‘ç –

### æœ‰å®˜æ–¹bootloaderçš„æƒ…å†µ

**è¯´æ˜ï¼š**

å®˜æ–¹çš„å¼•å¯¼ç¨‹åºä½¿ç”¨çš„æ˜¯ubootï¼Œä½äºflashçš„Bootloaderåˆ†åŒºï¼Œè€Œå®˜æ–¹å›ºä»¶åˆ™ä½äºOS1åˆ†åŒºï¼ˆçº¢ç±³AC2100ï¼‰ã€‚æ­£å¸¸åˆ·openwrtçš„è¿‡ç¨‹ä¸­ä¸ä¼šä¿®æ”¹bootloaderã€‚åªè¦è¿˜ä¿ç•™ç€å®˜æ–¹bootloaderï¼Œå°±å¯ä»¥é€šè¿‡å®˜æ–¹ä¿®å¤å·¥å…·æ¢å¤ã€‚

**æ­¥éª¤ï¼š**

1. ä¸‹è½½`å°ç±³è·¯ç”±å™¨ä¿®å¤å·¥å…·`å’Œå®˜æ–¹é•œåƒï¼š[ã€ä¸‹è½½æ±‡æ€»ã€‘å®¢æˆ·ç«¯/ROMä¸‹è½½ - å°ç±³ç¤¾åŒº (xiaomi.cn)](https://www.xiaomi.cn/post/19184644)
2. **è·¯ç”±å™¨é€šç”µ**ï¼ŒPCé€šè¿‡ç½‘çº¿è¿æ¥åˆ°è·¯ç”±å™¨LANå£
3. æ‰“å¼€`MIWIFIRepairTool.x86.exe`
4. é€‰æ‹©é•œåƒ
5. **é€‰æ‹©ç½‘å¡**ï¼ˆå¯ä»¥åœ¨ç½‘ç»œä¸­å¿ƒä¸­å°†å…¶å®ƒç½‘å¡ç¦ç”¨ï¼‰
6. æ–­å¼€è·¯ç”±å™¨ç”µæºï¼ŒæŒ‰ä½rsté”®ï¼ˆä¹Ÿæœ‰å¯èƒ½éœ€è¦ç”¨é’ˆæˆ³ï¼‰ï¼Œç„¶åæ¥ä¸Šç”µæºï¼Œç­‰å¾…é»„ç¯é—ªçƒï¼ˆä¸¤ä¸ªç¯ï¼Œä¸€ä¸ªæ˜¯æœ‰ç”µæºæ ‡å¿—ï¼Œä¸€ä¸ªæœ‰äº’è”ç½‘æ ‡å¿—ï¼Œè¿™é‡Œä¸ºç”µæºç¯é‚£ä¸ªï¼‰
7. è½¯ä»¶è‡ªåŠ¨ä¸Šä¼ é•œåƒ
8. ä¿æŒè€å¿ƒç­‰å¾…è·¯ç”±å™¨é»„ç¯å˜è“ï¼ˆä¸­é—´è¿‡ç¨‹ä¿æŒé»„ç¯ï¼‰ï¼Œ**äº²æµ‹éœ€è¦4åˆ†é’Ÿ**
9. æ–­ç”µåé‡æ–°æ¥ä¸Šç”µæºï¼Œè·¯ç”±å™¨é‡å¯

### åˆ·äº†breed

**è¯´æ˜ï¼š**

breedè‡ªèº«ä¾¿æ˜¯ä¸€ä¸ªbootloaderï¼Œåˆ·å®Œbreedåä¼šè¦†ç›–åŸæœ¬çš„bootloaderã€‚å¦‚æœæƒ³å¤åŸï¼Œå¯é€šè¿‡breedçš„åŠŸèƒ½ï¼Œé‡æ–°åˆ·å›å®˜æ–¹bootloaderã€‚**å¼ºçƒˆå»ºè®®åˆ·breedå‰ï¼Œå…ˆå¤‡ä»½åŸæœ¬çš„bootloaderä»¥åŠæ•´ä¸ªflash**ã€‚å¦‚æœæ²¡å¤‡ä»½ï¼Œè¿™é‡Œæ˜¯æ©å±±ä¸Šæ”¶é›†çš„**å°ç±³å®˜æ–¹bootloaderä¸‹è½½**ï¼š[è®ºå›æ”¶é›†çš„å‡ ä¸ªå°ç±³è·¯ç”±å™¨å®˜æ–¹bootloader - æ©å±±æ— çº¿è®ºå›](https://www.right.com.cn/forum/thread-4102208-1-1.html)

**æ­¥éª¤ï¼š**

1. é€šè¿‡breedåˆ·å›å®˜æ–¹bootloader
2. é€šè¿‡å®˜æ–¹ä¿®å¤å·¥å…·ä¿®å¤

## å¸¸ç”¨æ“ä½œ

### åˆ·ä¹‹å‰å¤‡ä»½mtdåˆ†åŒº

è·¯ç”±å™¨flashæœ‰è‹¥å¹²åˆ†åŒºï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåˆ†åŒºå­˜å‚¨è·¯ç”±å™¨MACåœ°å€ã€æ— çº¿æ ¡å‡†å‚æ•°ç­‰ã€‚è‹¥æŸåå¯èƒ½å¯¼è‡´æ— çº¿ä¿¡å·å¼±ç­‰é—®é¢˜ã€‚å› æ­¤åˆ·ä¹‹å‰æœ€å¥½å¤‡ä»½ã€‚
æŸ¥çœ‹mtdåˆ†åŒº

```bash
root@XiaoQiang:~# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 07f80000 00020000 "ALL"
mtd1: 00080000 00020000 "Bootloader"
mtd2: 00040000 00020000 "Config"
mtd3: 00040000 00020000 "Bdata"
mtd4: 00040000 00020000 "Factory"
mtd5: 00040000 00020000 "crash"
mtd6: 00040000 00020000 "crash_syslog"
mtd7: 00040000 00020000 "reserved0"
mtd8: 00400000 00020000 "kernel0"
mtd9: 00400000 00020000 "kernel1"
mtd10: 02000000 00020000 "rootfs0"
mtd11: 02000000 00020000 "rootfs1"
mtd12: 03580000 00020000 "overlay"
mtd13: 012a6000 0001f000 "ubi_rootfs"
mtd14: 030ec000 0001f000 "data"
```

å¤‡ä»½factoryåˆ†åŒºï¼ˆå°ç±³è·¯ç”±å™¨ä¸€èˆ¬æ˜¯factoryå­˜å‚¨äº†ä¸Šè¿°é‚£äº›æ•°æ®ï¼‰
```bash
cat /dev/mtd4 > /tmp/factory.bin
```

ä¹‹åé€šè¿‡scpå¤åˆ¶åˆ°æœ¬åœ°

### snapshotçš„è¯´æ˜

snapshotæ˜¯å¼€å‘ç‰ˆåˆ†æ”¯

- é»˜è®¤æ²¡æœ‰å®‰è£…luciï¼ˆæ²¡æœ‰ç½‘é¡µç•Œé¢ï¼‰
- ä¸Šæ¸¸æ¯å¤©éƒ½ä¼šç¼–è¯‘äº§ç”Ÿæ–°çš„snapshotã€‚å¯¹äºkernel modç›¸å…³è½¯ä»¶ï¼Œä¸æ˜¯åŒä¸€æ¬¡ç¼–è¯‘åˆ™æ— æ³•å®‰è£…ã€‚
- [[OpenWrt Wiki\] Installing OpenWrt development snapshots](https://openwrt.org/docs/guide-quick-start/developmentinstallation)

### å‘½ä»¤è¡Œå®‰è£…sysupgrade.bin

- [[OpenWrt Wiki\] Upgrading OpenWrt firmware using CLI](https://openwrt.org/docs/guide-user/installation/sysupgrade.cli)

```
sysupgrade -v /tmp/firmware_image.bin

#If sysupgrade is not available.
# Flash firmware
mtd -r write /tmp/firmware_image.bin firmware
```

### å¤‡ä»½æ¢å¤ CLI

- å®˜æ–¹ï¼š[[OpenWrt Wiki\] Backup and restore](https://openwrt.org/docs/guide-user/troubleshooting/backup_restore)

è‡ªå·±å®ç°äº†ä¸€ä¸ªè‡ªåŠ¨é…ç½®openwrtè„šæœ¬

- [TheRainstorm/my-openwrt-config (github.com)](https://github.com/TheRainstorm/my-openwrt-config)

### æ€§èƒ½æµ‹è¯•

#### iperf3

ax6s & mi4a

| æµ‹è¯•ç›®çš„      | è¿æ¥               | src       | dst   | speed(Mb/s) | å¤‡æ³¨                           |
| ------------- | ------------------ | --------- | ----- | ----------- | ------------------------------ |
| ax6s LANæ€§èƒ½  | åƒå…†USBç½‘å¡        | tianyi310 | ax6s  | **941**     |                                |
| ax6s æ— çº¿æ€§èƒ½ | wifi6 5Ghz@1201    | s3pro     | ax6s  | **626**     |                                |
| mi4a LANæ€§èƒ½  | 2.5Gç½‘å¡           | ryzen     | mi4a  | ***470***   |                                |
|               |                    |           |       |             |                                |
| éš§é“æ€§èƒ½      |                    | tianyi310 | ryzen | 118         |                                |
|               |                    |           |       |             |                                |
| éš§é“æ€§èƒ½      |                    | mi4a      | ax6s  | 136         |                                |
|               |                    | ax6s      | mi4a  | 149         |                                |
| mi4aäº¤æ¢æ€§èƒ½  | ryzen - mi4a - p2w | ryzen     | p2w   | **943**     | ç»“æœå±…ç„¶æ¯”ryzen - mi4aè¿˜è¦å¿«ï¼ |

å°†r4aæ›¿æ¢æ‰å
| æµ‹è¯•ç›®çš„ | src       | dst       | speed(Mb/s) | å¤‡æ³¨ |
| -------- | --------- | --------- | ----------- | ---- |
| p2w      | ryzen     | p2w       | **936**     |      |
|          | p2w       | ryzen     | ***577***   |      |
| éš§é“æ€§èƒ½ | p2w       | ax6s      | 150         |      |
|          | ax6s      | p2w       | 250         |      |
| éš§é“æ€§èƒ½ | ryzen     | tianyi310 | **295**     |      |
|          | tianyi310 | ryzen     | **173**     |      |
|          | s3pro     | ryzen     | 256         |      |
| 780/886  | s3pro     | p2w       | **370**     |      |
|          | ryzen     | s3pro     | 274         |      |

## å…·ä½“å‹å·åˆ·æœºè¿‡ç¨‹

### Redmi AC2100åˆ·Openwrt

[[OpenWrt Wiki] Xiaomi Redmi Router AC2100](https://openwrt.org/toh/xiaomi/xiaomi_redmi_router_ac2100)

#### 1. ç¡®è®¤stockç³»ç»Ÿç‰ˆæœ¬

ç¡®è®¤ç³»ç»Ÿç‰ˆæœ¬æ˜¯å¦ä¸º2.0.23ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™åœ¨ç³»ç»Ÿå†…æ‰‹åŠ¨å‡çº§åˆ°è¯¥ç‰ˆæœ¬http://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rm2100/miwifi_rm2100_all_fb720_2.0.23.bin

#### 2. è·å¾—ssh

ä½¿ç”¨webæ¼æ´ï¼Œè·å¾—ssh

```js
// Work for RedMi 2100 firmware 2.0.23
// http://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rm2100/miwifi_rm2100_all_fb720_2.0.23.bin

function getSTOK() {
    let match = location.href.match(/;stok=(.*?)\//);
    if (!match) {
        return null;
    }
    return match[1];
}

function execute(stok, command) {
    command = encodeURIComponent(command);
    let path = `/cgi-bin/luci/;stok=${stok}/api/misystem/set_config_iotdev?bssid=SteelyWing&user_id=SteelyWing&ssid=-h%0A${command}%0A`;
    console.log(path);
    return fetch(new Request(location.origin + path));
}

function enableSSH() {
    stok = getSTOK();
    if (!stok) {
        console.error('stok not found in URL');
        return;
    }
    console.log(`stok = "${stok}"`);

    password = prompt('Input new SSH password');
    if (!password) {
        console.error('You must input password');
        return;
    }

    execute(stok, 
`
nvram set ssh_en=1
nvram commit
sed -i 's/channel=.*/channel=\\"debug\\"/g' /etc/init.d/dropbear
/etc/init.d/dropbear start
`
    )
        .then((response) => response.text())
        .then((text) => console.log(text));
    console.log('New SSH password: ' + password);
    execute(stok, `echo -e "${password}\\n${password}" | passwd root`)
        .then((response) => response.text())
        .then((text) => console.log(text));
}

enableSSH();
```

#### 3. ä¸‹è½½openwrté•œåƒ

ä»å®˜æ–¹ä¸‹è½½æœ€æ–°é•œåƒï¼Œæ³¨æ„æœ‰å››ä¸ªæ–‡ä»¶

- kernel: å…·æœ‰æœ€å°‘æ–‡ä»¶ç³»ç»Ÿçš„Linuxå†…æ ¸. å¯¹äºé¦–æ¬¡å®‰è£…æˆ–æ¢å¤å¾ˆæœ‰ç”¨.
- kernel1: Linuxå†…æ ¸ä½œä¸ºå•ç‹¬çš„æ˜ åƒ
- rootfs0: æ ¹æ–‡ä»¶ç³»ç»Ÿä½œä¸ºå•ç‹¬çš„æ˜ åƒ.
- Sysupgrade: ä½¿ç”¨Sysupgradeæ˜ åƒæ›´æ–°å·²ç»è¿è¡ŒOpenWrtçš„è·¯ç”±å™¨. è¯¥æ˜ åƒå¯ä»¥ä¸LuCI Webç•Œé¢æˆ–ç»ˆç«¯ä¸€èµ·ä½¿ç”¨.

éœ€è¦ä¸‹è½½kernel1å’Œrootfs0

- [OpenWrt Downloads](https://downloads.openwrt.org/)
- [OpenWrt Firmware Selector](https://firmware-selector.openwrt.org/)

#### 4. å¤‡ä»½

é€šè¿‡dmesgï¼ŒçŸ¥é“ä¸€å…±æœ‰14ä¸ªmtdåˆ†åŒº

```
[    2.940000] NAND device: Manufacturer ID: 0xc8, Chip ID: 0xd1 (ESMT NAND 128MiB 3,3V 8-bit), 128MiB, page size: 2048, OOB size: 64
[    2.950000] [NAND]select ecc bit:4, sparesize :64 spare_per_sector=16
[    2.950000] Scanning device for bad blocks
[    3.100000] Signature matched and data read!
[    3.110000] load_fact_bbt success 1023
...
[    3.190000] Creating 14 MTD partitions on "MT7621-NAND":
[    3.190000] 0x000000000000-0x000007f80000 : "ALL"
[    3.200000] 0x000000000000-0x000000080000 : "Bootloader"
[    3.210000] 0x000000080000-0x0000000c0000 : "Config"
[    3.210000] 0x0000000c0000-0x000000100000 : "Bdata"
[    3.220000] 0x000000100000-0x000000140000 : "Factory"
[    3.230000] 0x000000140000-0x000000180000 : "crash"
[    3.230000] 0x000000180000-0x0000001c0000 : "crash_syslog"
[    3.240000] 0x0000001c0000-0x000000200000 : "cfg_bak"
[    3.240000] 0x000000200000-0x000000600000 : "kernel0"
[    3.250000] 0x000000600000-0x000000a00000 : "kernel1"
[    3.260000] 0x000000a00000-0x000002400000 : "rootfs0"
[    3.260000] 0x000002400000-0x000003e00000 : "rootfs1"
[    3.270000] 0x000003e00000-0x000006400000 : "overlay"
[    3.280000] 0x000006400000-0x000007f80000 : "obr"
[    3.280000] [mtk_nand] probe successfully!
```

é€šè¿‡cat /proc/mtdï¼ŒçŸ¥é“å¯¹åº”å…³ç³»

```
root@XiaoQiang:/tmp# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 07f80000 00020000 "ALL"
mtd1: 00080000 00020000 "Bootloader"
mtd2: 00040000 00020000 "Config"
mtd3: 00040000 00020000 "Bdata"
mtd4: 00040000 00020000 "Factory"
mtd5: 00040000 00020000 "crash"
mtd6: 00040000 00020000 "crash_syslog"
mtd7: 00040000 00020000 "cfg_bak"
mtd8: 00400000 00020000 "kernel0"
mtd9: 00400000 00020000 "kernel1"
mtd10: 01a00000 00020000 "rootfs0"
mtd11: 01a00000 00020000 "rootfs1"
mtd12: 02600000 00020000 "overlay"
mtd13: 01b80000 00020000 "obr"
mtd14: 00c1c000 0001f000 "ubi_rootfs"
mtd15: 021e8000 0001f000 "data"
```

å¤‡ä»½ï¼Œå…¶ä¸­Factoryä¸­å­˜å‚¨äº†EEPROMçš„æ•°æ®

```
cat /dev/mtd4 > Factory.dump

scpå¤åˆ¶åˆ°æœ¬åœ°
```

#### 5. è®¾ç½®ç¯å¢ƒå˜é‡

è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆrm2100æœ‰åŒç³»ç»Ÿç”¨äºå¤‡ä»½ä¿æŠ¤ï¼Œéœ€è¦è®¾ç½®å…ˆå¯åŠ¨å“ªä¸€ä¸ªï¼‰

```bash
# Enable uart and boot_wait, useful for testing or recovery if you have an uart adapter!
nvram set uart_en=1
nvram set boot_wait=on
nvram set bootdelay=5

# Set kernel1 as the booting kernel
nvram set flag_try_sys1_failed=1

# Commit our nvram changes
nvram commit
```

#### 6. åˆ·æœº

```bash
mtd write kernel1.bin kernel1
mtd -r write rootfs0.bin rootfs0
```

### MI 4Aåƒå…†ç‰ˆ

å®˜æ–¹æ•™ç¨‹ï¼š[[OpenWrt Wiki] Xiaomi Mi Router 4A Gigabit Edition](https://openwrt.org/inbox/toh/xiaomi/xiaomi_mi_router_4a_gigabit_edition)

**warning**
- 2022/10ï¼šv2ç‰ˆæœ¬çš„4Aåƒå…†ç‰ˆæ— æ³•åˆ·opã€‚åŸç‰ˆä½¿ç”¨çš„æ˜¯Winbond or GigaDeviceçš„flashèŠ¯ç‰‡ï¼Œæˆ‘æ‰‹å¤´çš„æ˜¯GigaDeviceçš„[GD25Q127CSIG ](https://www.tme.eu/en/details/gd25q127csig/serial-flash-memories-integrated-circ/gigadevice/)ã€‚æ–°ç‰ˆä½¿ç”¨Â Eon or CFeonçš„èŠ¯ç‰‡ï¼Œè¿˜åœ¨æ”¯æŒä¸­ã€‚
- è€ç‰ˆçš„æœ‰æ— çº¿å±è”½ï¼Œè€Œåœ¨å”®çš„æ²¡æœ‰

#### è¯´æ˜

å¯ä»¥æ¼æ´è·å–shellï¼Œä¸å¿…ä½¿ç”¨ç¡¬ä»¶ç¼–ç¨‹å™¨

2022/11/6æ—¥ï¼Œå› åˆ·breed bootloaderï¼Œä½¿å¾—MI 4Aå˜ç –ã€‚å¿ å‘Šï¼šåˆ«ç”¨breedï¼Œä¼šå˜å¾—ä¸å¹¸ã€‚ï¼ˆä½ tmæ”¯æŒr3gï¼Œä¸æ”¯æŒmi 4aèƒ½ä¸èƒ½å†™æ¸…æ¥šï¼‰

#### æ­¥éª¤

~~1. é¦–å…ˆéœ€è¦ä½¿ç”¨`OpenWRTInvasion`**è·å–shell**ã€‚å‚è€ƒï¼š[acecilia/OpenWRTInvasion(github.com)](https://github.com/acecilia/OpenWRTInvasion)ã€‚

~~åŒæ—¶ï¼Œè¯¥ä»“åº“ä¹Ÿæä¾›äº†è·å¾—shellåçš„åˆ·æœºè¿‡ç¨‹ã€‚ä¸è¿‡ä½¿ç”¨å®˜æ–¹çš„`OpenWRTInvasion`ä¼šä»githubä¸Šä¸‹è½½æ–‡ä»¶ï¼Œè€Œå› ä¸ºç½‘ç»œåŸå› å¯èƒ½ä¼šå¤±è´¥ã€‚æ©å±±è®ºå›ä¸­æœ‰ç”¨æˆ·æä¾›äº†ä¿®æ”¹ä»£ç çš„ç¦»çº¿ç‰ˆæœ¬ï¼Œå¯ä»¥æœç´¢ä½¿ç”¨ã€‚
ä¸è¿‡ä¹Ÿå¯ä»¥è‡ªè¡Œä¿®æ”¹ä»£ç ï¼šä¿®æ”¹`script.sh`ï¼Œå°†å…¶ä¸­çš„é“¾æ¥æ›¿æ¢æˆæœ¬åœ°é“¾æ¥ã€‚å¯ä»¥ä½¿ç”¨python -m http.serverè¿è¡Œä¸€ä¸ªå°çš„httpæœåŠ¡ï¼Œæä¾›ä¸‹è½½ã€‚ä¾‹ï¼š
   ```bash
   curl -L "https://github.com/acecilia/OpenWRTInvasion/raw/master/script_tools/busybox-mipsel" --insecure --output busybox
   
   #æ”¹ä¸º,ipéœ€è¦è°ƒæ•´
   curl "http://192.168.31.189:8000/busybox-mipsel" --output busybox
   ```


1. ç°åœ¨å®˜æ–¹ä»“åº“é›†æˆäº†æœ¬åœ°æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œç›´æ¥è¿è¡Œè„šæœ¬å³å¯ã€‚ä½†æ˜¯å®˜æ–¹ä»“åº“å´æ”¾å¼ƒäº†å¯¹windowsçš„æ”¯æŒï¼Œä¸è¿‡äº²æµ‹åœ¨git bashä¸­è¿è¡Œæ²¡æœ‰é—®é¢˜ï¼Œåªéœ€è¦æŠŠè„šæœ¬å¼€å¤´çš„æ£€æµ‹æ³¨é‡Šæ‰å³å¯ã€‚
```
# if platform.system() == "Windows":
# Â  Â  sys.exit("Stopping: script can only be run on a Mac/Linux system")
```
2. ä¹‹åä½¿ç”¨telnetè¿›è¡Œè¿æ¥ï¼ŒæˆåŠŸè·å¾—shellå¦‚å›¾æ‰€ç¤º
```
telnet 192.168.31.1 #è´¦å·root, å¯†ç root
```
   ![image-20221030210955796](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/image-20221030210955796.png)
3. æ¥ç€ä¸Šä¼ openwrté•œåƒ(ä½¿ç”¨sysupgrade bin)åˆ°è·¯ç”±å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨pythonæ­å»ºhttpæ–‡ä»¶æœåŠ¡å™¨ã€‚æœ€åè¿è¡Œmtdç­‰å¾…è·¯ç”±å™¨é‡å¯å®Œæˆå³å¯ã€‚
```
#windowä¸Š, sysupgrade.binæ‰€åœ¨ç›®å½•
python -m http.server

#è·¯ç”±å™¨ä¸Š
cd /tmp
curl -O http://<windows ip>:8000/sysupgrade.bin
mtd -e OS1 -r write sysupgrade.bin OS1
```

#### å‚è€ƒ

breedä½¿ç”¨è¯´æ˜ï¼šhttps://www.sohu.com/a/304140654_120096961
breedåˆ·openwrtæ•™ç¨‹https://www.ixigua.com/6974624328725824031

#### EEPROMä¸‹è½½

> eepromé‡Œæœ‰macå’Œsnç­‰ä¿¡æ¯ï¼Œå¦‚æœsnä¸¢å¤±åˆ·å®˜æ–¹bootloaderåˆ·å›åŸå‚ä¹Ÿä¸èƒ½ç»‘å®šæ‰‹æœºappçš„

- [ã€æ–°æé†’ã€‘[20210919æ›´æ–°]å°ç±³è·¯ç”±4Aåƒå…†ç‰ˆLEDEå›ºä»¶_é›†æˆå¿«ä¹ä¸Šç½‘ã€å†…ç½‘ç©¿é€ã€KMSã€ç½‘ç»œåŠ é€Ÿ-å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-4054821-1-1.html)

> æˆ‘çœ‹äº†ä¸‹æœç„¶æ˜¯é”™çš„ï¼Œæˆ‘ä¹‹å‰ä¹Ÿæ˜¯è¿™ä¸ªæƒ…å†µï¼Œåæ¥åˆ†æäº†ä¸‹æŠŠeepromç”¨ä¸Šäº†æ­£ç¡®çš„å°±å¥½äº†ï¼Œä½ åˆ·æˆ‘è¿™ä¸ªeepromï¼Œå¦‚æœè¿˜ä¸è¡Œå°±åˆ·æˆ‘çš„è§£é”åˆ†åŒºçš„ledeå›ºä»¶ï¼Œç”¨mtdå‘½ä»¤åˆ·å†™ï¼Œsshä¸Šè·¯ç”±ï¼Œæœ¬åœ°scpå‘½ä»¤æ‹·è´ä¸Šä¼ åˆ°tmpç›®å½•ï¼Œ  
  mtd -r write /tmp/eeprom.bin factory  
é‡å¯å®Œäº†å°±ok  
åˆ·å®Œmacä¼šå˜ï¼ŒæŠŠä½ çš„macåœ°å€æ”¹æˆä½ åŸæ¥çš„macåœ°å€ã€‚  
å¦‚æœæœ‰åŸæ¥çš„å›ºä»¶å¤‡ä»½ï¼Œå‘æˆ‘æˆ‘æ¥å¸®ä½ æå–

- [ã€æ–°æé†’ã€‘å¸®åŠ©æå–eepromå°ç±³4Aåƒå…†(22å¹´8æœˆæ–°ç‰ˆ)-å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8252165-1-1.html)

#### EEPROMä¿®æ”¹

[ã€æ–°æé†’ã€‘å…³äºæ–°3(newifi 3)çš„eepromæ–‡ä»¶ä¸­MAC-SNç­‰å‚æ•°ä½ç½®-newifiæ— çº¿è·¯ç”±å™¨åŠç½‘ç»œè®¾å¤‡-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-384637-1-1.html)

ç”¨SSHç™»å½•è¿›å…¥è·¯ç”±å™¨çš„Consoleå°åï¼Œç”¨å‘½ä»¤(cat /proc/mtd)çš„è¾“å‡ºä¸­ï¼ŒFactoryåŒºå¯¹åº”çš„å°±æ˜¯æ— çº¿å’ŒMAC/SNç­‰çš„é…ç½®æ–‡ä»¶ã€‚
è¿™ä¸ªæ–‡ä»¶å¤‡ä»½å‡ºæ¥åï¼Œå¤§å°ä¸º64KBï¼Œå¯ä»¥åœ¨breedä¸­æ›´æ–°eepromå¤„åˆ·å…¥è·¯ç”±å™¨ã€‚

(ä¸‹å›¾ä¸ºè§£é”åçš„è¾“å‡º)
ç”¨WinHexæ‰“å¼€å¤‡ä»½çš„æ–‡ä»¶(å‡è®¾ä¸ºeeprom.bin)

1)     è·¯ç”±å™¨çš„SN
è·¯ç”±å™¨çš„SNå·åœ¨è·¯ç”±å™¨çš„èƒŒé¢è´´çº¸å¤„æœ‰ï¼ŒSNçš„å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„åç§»0x7000(å¤„)ï¼Œæ ¼å¼ä¸ºä»¥MNDå¼€å¤´ï¼Œå¦‚ä¸‹ï¼š

2)     è·¯ç”±å™¨çš„MACåœ°å€
è·¯ç”±å™¨çš„MACå·åœ¨è·¯ç”±å™¨çš„èƒŒé¢è´´çº¸å¤„æœ‰ï¼ŒMACçš„å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„åç§»0xE000(å¤„)ï¼Œæ ¼å¼ä¸ºè¿ç»­çš„ä¸¤ä¸ªMACåœ°å€ï¼Œå…±å 12å­—èŠ‚ã€‚
åˆ†åˆ«ä¸ºèµ·å§‹â€MACåœ°å€-ç»“æŸMACåœ°å€â€, ç»“æŸMACåœ°å€ä¸ºèµ·å§‹MACåœ°å€çš„æœ€åä¸€ä¸ªå­—èŠ‚å†…å®¹+2. å¦‚å›¾ï¼š
èµ·å§‹MACåœ°å€ï¼š20 76 93 48 A9 1F (è·¯ç”±å™¨èƒŒé¢å¤„çš„è´´çº¸)
ç»“æŸMACåœ°å€ï¼š20 76 93 48 A9 21

3)     å’Œæ— çº¿æœ‰å…³çš„å‚æ•°
2.4Gæ— çº¿çš„BSSIDåœ¨æ–‡ä»¶å¼€å¤´åç§»0x4-0x9å¤„ï¼Œæ€»å…±6å­—èŠ‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:

5Gæ— çº¿çš„BSSIDåœ¨åç§»0x8004-0x8009å¤„ï¼Œæ€»å…±6å­—èŠ‚, (2.4Gæ— çº¿çš„BSSIDä¸5G-BSSIDçš„æœ€åä¸€ä¸ªå­—èŠ‚å†…å®¹ç›¸å·®2)ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

å’Œæ— çº¿æœ‰å…³çš„å‚æ•°åº”è¯¥æ˜¯åœ¨åç§»0x8000-0x80C0å¤„ã€‚çœ‹ç½‘å‹ä»¬æ”¹çš„è¯ï¼Œéƒ½æ˜¯åœ¨0x8060-0x809Fè¿™ä¸‰è¡Œä¸Šä¿®æ”¹ï¼Œç”±äºæ²¡æœ‰å…·ä½“è¯´æ˜å‚æ•°å«ä¹‰ï¼Œå› æ­¤ä¸æ¨èè‡ªå·±ä¿®æ”¹ã€‚
å¦‚å›¾æ‰€ç¤ºï¼š

4) æœªçŸ¥çš„å†…å®¹

æ–‡ä»¶å¼€å¤´çš„0x56-0x61åç§»å¤„ï¼Œä¸€å…±12å­—èŠ‚ï¼Œåˆ†ä¸º2ç»„ã€‚å‰6å­—èŠ‚å’Œå6å­—èŠ‚å†…å®¹ä¹Ÿæ¯”è¾ƒç›¸ä¼¼ã€‚ä¸æ˜¯macä¹Ÿä¸æ˜¯bssid.


å¦å¤–åœ¨åç§»0x8060-0x80A0å…±4è¡Œå†…ï¼Œæœ‰å‡ ä¸ªå‚æ•°æ˜¯ä»¥5ä¸ªå­—èŠ‚ä¸ºä¸€ç»„çš„å‚æ•°ï¼Œå…·ä½“æ ¼å¼ç‰¹å¾å¦‚ä¸‹ï¼š
00 00 26 xx xx, æˆ–è€… 00 01 26 xx xx, æˆ–è€…00 02 26 xx xx ç­‰ã€‚

å»ºè®®:
    å¯ä»¥ç”¨å…¶å®ƒäººçš„EEPROMå›ºä»¶ï¼Œä»…ä»…ä¿®æ”¹MACå’ŒSN (å¯é€‰ï¼šBSSID)ä¸ºè‡ªå·±çš„è·¯ç”±å™¨çš„å³å¯ï¼Œä¸æ¨èè‡ªå·±ä¿®æ”¹æ— çº¿å‚æ•°éƒ¨åˆ†å†…å®¹ã€‚

### MI R3G

å®˜æ–¹æ•™ç¨‹ï¼š[[OpenWrt Wiki\] Xiaomi Mi WiFi R3G (Mi Wifi Router 3G / MIR3G / MI3G / mi4a Gigabit)](https://openwrt.org/toh/xiaomi/mir3g)

r3gå®˜æ–¹å›ºä»¶ä¸‹è½½ï¼š[OpenWrt Firmware Selector](https://firmware-selector.openwrt.org/?version=21.02.3&target=ramips%2Fmt7621&id=xiaomi_mi-router-3g)

#### å‡†å¤‡

- FAT32æ ¼å¼Uç›˜
- ä¸€æšé’ˆç”¨äºæˆ³è·¯ç”±å™¨reseté”®
- æ‰‹æœºå®‰è£…MIWIFI app

#### å¼€å¯ssh

1. æ›´æ–°ä¸ºå°ç±³å¼€å‘ç‰ˆå›ºä»¶ï¼šhttps://bigota.miwifi.com/xiaoqiang/rom/r3g/miwifi_r3g_firmware_12f97_2.25.124.bin

2. **ä¸‹è½½å°ç±³è·¯ç”±å™¨æ‰‹æœºå®¢æˆ·ç«¯(åº”ç”¨å•†åº—MI WIFI)è½¯ä»¶ï¼Œç»‘å®šè·¯ç”±å™¨**

3. æ ¹æ®https://d.miwifi.com/rom/sshï¼Œå¼€å¯SSH

   *p.s. 1. å³ä½¿æ˜¯åŒä¸€å‹å·ï¼Œmiwifi_ssh.binä¹Ÿæ˜¯ä¸åŒçš„ï¼›2. sshå¯†ç æ˜¾ç¤ºåœ¨è¯¥é¡µé¢*

   1. è¯·å°†ä¸‹è½½çš„å·¥å…·åŒ…binæ–‡ä»¶å¤åˆ¶åˆ°Uç›˜ï¼ˆFAT/FAT32æ ¼å¼ï¼‰çš„æ ¹ç›®å½•ä¸‹ï¼Œä¿è¯æ–‡ä»¶åä¸ºmiwifi_ssh.binï¼›
   2. æ–­å¼€å°ç±³è·¯ç”±å™¨çš„ç”µæºï¼Œå°†Uç›˜æ’å…¥USBæ¥å£ï¼›
   3. æŒ‰ä½resetæŒ‰é’®ä¹‹åé‡æ–°æ¥å…¥ç”µæºï¼ŒæŒ‡ç¤ºç¯å˜ä¸ºé»„è‰²é—ªçƒçŠ¶æ€å³å¯æ¾å¼€reseté”®ï¼›
   4. ç­‰å¾…3-5ç§’åå®‰è£…å®Œæˆä¹‹åï¼Œå°ç±³è·¯ç”±å™¨ä¼šè‡ªåŠ¨é‡å¯ï¼Œä¹‹åæ‚¨å°±å¯ä»¥å°½æƒ…æŠ˜è…¾å•¦ ï¼šï¼‰

#### å¤‡ä»½

æŸ¥çœ‹mtdåˆ†åŒº

```
root@XiaoQiang:~# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 07f80000 00020000 "ALL"
mtd1: 00080000 00020000 "Bootloader"
mtd2: 00040000 00020000 "Config"
mtd3: 00040000 00020000 "Bdata"
mtd4: 00040000 00020000 "Factory"
mtd5: 00040000 00020000 "crash"
mtd6: 00040000 00020000 "crash_syslog"
mtd7: 00040000 00020000 "reserved0"
mtd8: 00400000 00020000 "kernel0"
mtd9: 00400000 00020000 "kernel1"
mtd10: 02000000 00020000 "rootfs0"
mtd11: 02000000 00020000 "rootfs1"
mtd12: 03580000 00020000 "overlay"
mtd13: 012a6000 0001f000 "ubi_rootfs"
mtd14: 030ec000 0001f000 "data"
```

å¤‡ä»½factoryåˆ†åŒº

```
cat /dev/mtd4 > /tmp/factory.bin

#on windows
scp root@192.168.33.193:/tmp/factory.bin .
scp root@192.168.33.228:/tmp/factory.bin .
```

#### åˆ·openwrt

```
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
nvram set flag_try_sys1_failed=1
nvram commit
reboot
```

### AX6S

#### æ­¥éª¤

[YangWang92/AX6S-unlock (github.com)](https://github.com/YangWang92/AX6S-unlock)

- telnetåæ‰‹åŠ¨å¼€å¯ssh
  ```
  /etc/init.d/dropbear start
  ```
  â€‹ tips: ä½¿ç”¨git-bashç‰ˆæœ¬çš„sshè¿æ¥æŠ¥é”™ã€‚ä½¿ç”¨cmdçš„sshå¯ä»¥ã€‚
  ```
  Unable to negotiate with 192.168.31.1 port 22: no matching host key type found. Their offer: ssh-rsa
  ```
- å¿…é¡»æ·»åŠ boot_fw1æ”¹è¡Œï¼Œå¦åˆ™é‡å¯åè¿›å…¥åŸç³»ç»Ÿã€‚
  ```
  nvram set ssh_en=1
  nvram set uart_en=1
  nvram set boot_wait=on
  nvram set flag_boot_success=1
  nvram set flag_try_sys1_failed=0
  nvram set flag_try_sys2_failed=0
  nvram set "boot_fw1=run boot_rd_img;bootm"
  nvram commit
  ```
- åˆ·å†™factory.bin-> firmwareåˆ†åŒº


AX6Sä¸ºå›½å†…ç‰ˆï¼Œå›½å¤–ç‰ˆç§°ä¸ºAX3200
- SoCï¼š**MT7622**B: 2 x A53@1.35GHz CPUã€‚
  - æ»¡è¡€ç‰ˆæœ¬æ˜¯MT7622Aï¼Œå°‘äº†è“ç‰™å°±æ˜¯MT7622BVï¼Œæ²¡æœ‰è“ç‰™å’Œå¤šåª’ä½“åŠŸèƒ½çš„æ˜¯MT7622Bï¼ŒåŸºæœ¬å‰©ä¸‹æ— çº¿åŠŸèƒ½çš„æ˜¯MT7622E
-  ram: 256 + flash: 128
- [[OpenWrt Wiki] Xiaomi AX3200 / Redmi AX6S](https://openwrt.org/toh/xiaomi/ax3200)

### ç«æ–—äº‘2.0ï¼ˆP&W)

#### èµ„æ–™

[[OpenWrt Wiki] P&W R619AC](https://openwrt.org/toh/p_w/r619ac)


#### æ•™ç¨‹

éœ€è¦å…ˆåˆ·å…¥opbootï¼ˆä¸€ä¸ªç¬¬ä¸‰æ–¹bootloaderï¼‰[ç«æ–—äº‘2åˆ·opboot - è·¯ç”±æ™ºæ€ (red-yellow.net)](https://www.red-yellow.net/ç«æ–—äº‘2åˆ·opboot.html)

ç„¶åå†åˆ·openwrtã€‚
ç¼–è¯‘ï¼š[ç«æ–—äº‘2çš„OpenWrtå›ºä»¶ - è·¯ç”±æ™ºæ€ (red-yellow.net)](https://www.red-yellow.net/%e7%ab%9e%e6%96%97%e4%ba%912%e7%9a%84openwrt%e5%9b%ba%e4%bb%b6.html)
åˆ·çš„è¿™é‡Œä½œè€…æä¾›çš„immortalwrtï¼š[ã€æ–°æé†’ã€‘ã€2023-6-13ã€‘ç«æ–—äº‘2.0P&W-R619AC OPENWRTå›ºä»¶|æ’ä»¶å…¨é¢|å¤šç‰ˆæœ¬-OPENWRTä¸“ç‰ˆ-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-4061585-1-1.html)


ä¹‹å‰ä½¿ç”¨switchå®˜æ–¹å›ºä»¶22.03ï¼Œçœ‹åˆ°deviceæœ‰eth0, eth1ï¼Œç„¶åswitchç•Œé¢å¯ä»¥è®¾ç½®4ä¸ªlanå£
ä½†æ˜¯é—®é¢˜æ˜¯åªè¦ä¸€æ”¹åŠ¨vlanè®¾ç½®ï¼Œé€šè¿‡wanå£ï¼ˆå¼€å¯192.168.99.0çš„dhcpï¼‰è®¿é—®p2wå°±ä¼šæ‰

åé¢åˆ·äº†ä¸€ä¸ªå…¶å®ƒäººç¼–è¯‘çš„immortalwrtå›ºä»¶ï¼Œå‘ç°å…¶å®åªæœ‰ä¸€ä¸ªeth0ã€‚wanå£eth0.2æ˜¯ä¸€ä¸ªvlanã€‚switchç•Œé¢æœ‰4ä¸ªlanå’Œ1ä¸ªwanå¯ä»¥é…ç½®ã€‚
è¿™ä¸‹é…ç½®switch vlanå¼‚å¸¸ç¨³å®šé¡ºç•…
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/vlan-plan.jpg)


è¿™é‡ŒCPUç«¯å£çš„tagå’Œuntag
- è®¾ç½®ä¸ºoffï¼Œåˆ™ä¸å­˜åœ¨eth0.3è®¾å¤‡
- è®¾ç½®ä¸ºtagåˆ™eth0.3ä¸Štcpdumpèƒ½æ”¶åˆ°å¾ˆå¤šåŒ…
- è®¾ç½®ä¸ºuntagï¼Œåˆ™æ”¶ä¸åˆ°åŒ…

æ”¶åˆ°çš„åŒ…å…¶å®åªæœ‰å¹¿æ’­ç­‰æƒ…å†µï¼Œå¦åˆ™åŒ…ç›´æ¥ä»ç‰¹å®šç«¯å£å‡ºå»äº†ï¼Œä¸ä¼šå¾€å…¶å®ƒç«¯å£å‘ã€‚
```
root@p2w:~# tcpdump -ni eth0.3 host 114.214.236.72
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0.3, link-type EN10MB (Ethernet), capture size 262144 bytes
q01:50:16.005639 IP 114.214.236.72.45520 > 239.255.255.250.1900: UDP, length 94
01:50:16.006412 ARP, Request who-has 114.214.236.74 tell 114.214.236.72, length 46
01:50:16.173072 ARP, Request who-has 114.214.236.96 tell 114.214.236.72, length 46
01:50:16.926278 ARP, Request who-has 114.214.236.200 tell 114.214.236.72, length 46
```

#### é‡åˆ°é—®é¢˜

ç»å¸¸æ€§çš„æ‰ç½‘ç»œï¼Œç ”ç©¶åå‘ç°æ˜¯apçš„br-lanå’Œä¸Šæ¸¸æ— æ³•è¿æ¥äº†ã€‚é€šè¿‡æ— çº¿æ‰‹åŠ¨è®¾ç½®é™æ€ipå¯ä»¥è¿ä¸Šp2wã€‚å°è¯•ping ç½‘å…³åœ°å€ï¼Œå‘ç°eth0.1ä¸Šèƒ½æŠ“åˆ°arpåŒ…ï¼Œä½†æ˜¯ä¸Šæ¸¸å¯¹åº”bridgeå´æŠ“ä¸åˆ°ã€‚åè¿‡æ¥ï¼Œä¸Šæ¸¸arping apåœ°å€ï¼Œapä¹Ÿæ”¶ä¸åˆ°åŒ…ã€‚
- æµ‹è¯•å¦‚æœæŠŠè¿æ¥apçš„ç½‘çº¿è¿æ¥ç¬”è®°æœ¬ï¼Œç½‘ç»œæ˜¯æ­£å¸¸çš„ï¼Œå› æ­¤æ’é™¤ä¸Šæ¸¸é—®é¢˜ã€‚
```
arping -i interface æµ‹è¯•äºŒå±‚æ˜¯å¦é€š
arpæŸ¥çœ‹å½“å‰macè¡¨
tcpdump -ni eth0.1 arp
```

æ²¡åŠæ³•ï¼Œä¸çŸ¥å¦‚ä½•è§£å†³ï¼Œåªå¥½é‡è£…äº†å®˜æ–¹22.03.5çš„ç³»ç»Ÿã€‚å®˜æ–¹ç³»ç»ŸæŠŠwanå•ç‹¬æ‹¿äº†å‡ºæ¥ä½œä¸ºeth1ï¼Œè€Œswitchç•Œé¢å¯ä»¥é…ç½®eth0å’Œå‰©ä½™å››ä¸ªç«¯å£

### 360 T7

#### åŸºæœ¬å‚æ•°

mt7681ï¼š2xA53@1.3GHz
256 RAM+ 128 NAND

ä»·æ ¼
- åŸç‰ˆ118x2åŒ…é‚®ï¼Œé­”æ”¹512å†…å­˜ç‰ˆï¼š150

![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815125432.png)

å¾…æœº60å¤šåº¦æœ‰æ¯’ï¼Œçœ‹æ¥è¿˜æ˜¯éœ€è¦è‡ªå·±åŠ æ•£çƒ­ç‰‡

40(30ï¼Œæœ€å°è¦†ç›–ä¸¤ä¸ªçš„è·ç¦») x25ï¼ˆæ·±åº¦10mmï¼‰
- 13x7
- 12x13
25x25
- 10x12
30x25ï¼ˆæ·±åº¦ï¼š15mmï¼‰
- 13x14

å•ä¸ªèŠ¯ç‰‡ï¼š14x14
æ•´ä¸ªç›–ä½ï¼š25x25ï¼Œ30x20


[hanwckf's blog](https://cmi.hanwckf.top/)
[360 T7 åˆ· openwrt æ•™ç¨‹ï½œæœ€å¼ºçš„ç™¾å…ƒè·¯ç”±å™¨ | é…±ç´«è¡¨ (qust.me)](https://qust.me/post/360t7-openwrt/)
[ã€æ–°æé†’ã€‘360T7 openwrtå›ºä»¶å‘å¸ƒï¼Œæ„Ÿè°¢Hå¤§-OPENWRTä¸“ç‰ˆ-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8263290-1-1.html)
æåˆ°äº†ipv6 + wiregaurd + hnatæœ‰é—®é¢˜ï¼Ÿ[[é¿å‘] 360T7 - V2EX](https://www.v2ex.com/t/930398)
#### å‡†å¤‡

ç¡¬ä»¶
- æ‹†æœºå·¥å…·ï¼šèºä¸åˆ€ï¼Œæ’¬ç‰‡ï¼ˆæ²¡å®ƒçœŸæ‰“ä¸å¼€ï¼‰
- usbè½¬ttlæ¨¡å—ï¼Œæœé‚¦çº¿å…¬å¯¹æ¯

è½¯ä»¶
- puttyç­‰ä¸²å£è½¯ä»¶
- ä¿®æ”¹ç‰ˆubootï¼š[Release 20230727 Â· hanwckf/bl-mt798x (github.com)](https://github.com/hanwckf/bl-mt798x/releases/tag/20230727)
- å›ºä»¶ï¼š237, immortalåŸç‰ˆ
- å¯èƒ½éœ€è¦ï¼šæ—§ç‰ˆåŸå‚å›ºä»¶ï¼Œæ–°ç‰ˆå›ºä»¶å…³é—­äº†failsafeæ¨¡å¼[hqvv/360T7: qihoo 360T7 resources and official firmware (github.com)](https://github.com/hqvv/360T7)
- å¯é€‰ï¼Œwindows netcatï¼Œç”¨äºåœ¨failsafeæ¨¡å¼ä¸‹å¤‡ä»½è·¯ç”±å™¨flashã€‚
#### 1. æ‹†æœºå’ŒTTLæ¨¡å—è¿æ¥

æ‹†æœºæ³¨æ„ï¼š
- è·¯ç”±å™¨åªæœ‰ä¸¤ä¸ªèºä¸ï¼Œéƒ½è¢«èƒŒé¢è´´çº¸ç›–ä½äº†
- ä¸€å…±æœ‰2+8ä¸ªå¡å£ï¼Œéå¸¸éš¾æ‹†ã€‚ä¼˜å…ˆä»è·¯ç”±å™¨ä¸‹æ–¹æ’¬å¼€ï¼Œç„¶åå†ä¸¤ä¾§ï¼Œæœ€åä¸Šä¾§æ¯”è¾ƒå®¹æ˜“ã€‚
  - è§†é¢‘å‚è€ƒï¼š[360T7ç¬¬äºŒéƒ¨åˆ†æ‹†æœº_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1GV4y1P74A/?spm_id_from=333.880.my_history.page.click)

TTLæ¨¡å—è¿æ¥
æ¿å­å·¦ä¸Šè§’å››ä¸ªè§¦å­”ï¼Œä»ä¸Šåˆ°ä¸‹ï¼šRX, TX, GNDã€‚**æ³¢ç‰¹ç‡115200**
- æ³¨æ„ï¼Œå¯¹åº”TTLæ¨¡å—ä¸€ä¾§ï¼ŒRXéœ€è¦å¯¹åº”TXï¼ŒTXå¯¹åº”RX

#### 2. TTLè¿›å…¥failsafeæ¨¡å¼å¼€å¯telnet

åŸç†
- åŸç³»ç»Ÿä½¿ç”¨ubootï¼Œä½†æ˜¯å…³é—­äº†ubootèœå•ï¼Œå¼€æœºåä¼šç›´æ¥å¼•å¯¼å†…æ ¸
- åŸç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹ä¸­æ”¯æŒfailsafeæ¨¡å¼ï¼Œè¿›å…¥åå¯ä»¥mount_rootï¼Œå¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œä¿®æ”¹ï¼Œä»è€Œå¯ä»¥å¼€å¯telnet

è¿‡ç¨‹
- è¿æ¥å¥½ä¸²å£ï¼Œå¹¶æ‰“å¼€puttyåï¼Œæ’ç”µå¼€æœºï¼Œè·¯ç”±å™¨å¯åŠ¨å¹¶è¾“å‡ºä¿¡æ¯
- åœ¨å¼•å¯¼å†…æ ¸è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°è¿›å…¥failsafeæç¤ºï¼ŒæŒ‰f+enterå³å¯è¿›å…¥ã€‚å¤§æ¦‚æœ‰3ç§’ç­‰å¾…æ—¶é—´ã€‚
  - å¦‚æœæ²¡å‡ºç°ï¼Œéœ€è¦é™çº§åŸç³»ç»Ÿã€‚[ã€æ–°æé†’ã€‘360t7m(t7ç§»åŠ¨å®šåˆ¶ç‰ˆ)æ— æ³•è¿›å…¥failsafeæ¨¡å¼-OPENWRTä¸“ç‰ˆ-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8297040-1-1.html)
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815140202.png)


è¿›å…¥å
```bash
# å¼€å¯ubootæ§åˆ¶å°èœå•
fw_setenv bootmenu_delay 3

# æŒ‚è½½rootfså¹¶å¼€å¯telnet
mount_root
sed -i 's/.*local debug=.*/\tlocal debug=1/' /etc/init.d/telnet

# ä¿®æ”¹rootå¯†ç 
passwd root

# é‡å¯
reboot
```

å¯ä»¥é€‰æ‹©å¤‡ä»½å›ºä»¶
- æ³¨æ„åƒä¸‡ä¸è¦pingï¼Œå¦åˆ™æ— æ³•ctrl-c
- ncç»“æŸåä¼šè‡ªåŠ¨é€€å‡ºï¼Œ128MBçš„flashä¸åˆ°1åˆ†é’Ÿèƒ½å¤Ÿä¸‹è½½å®Œã€‚
```bash
# å°†ç”µè„‘çš„IPåœ°å€è®¾ç½®ä¸º192.168.1.8ï¼Œæ’å…¥è·¯ç”±å™¨LANå£
# ä½¿ç”¨ncç›‘å¬3333ç«¯å£å¹¶å†™å…¥all.bin
# Windowsç³»ç»Ÿå¯ä»¥ä½¿ç”¨netcat
# nc -l -p 3333 > all.bin

# åœ¨è·¯ç”±å™¨failsafeæ¨¡å¼ä¸‹å¼€å¯ç½‘ç»œ
ifconfig eth0 0.0.0.0
brctl addbr br-lan
ifconfig br-lan 192.168.1.1 netmask 255.255.255.0 up
brctl addif br-lan eth0

# è¯»å–/dev/mtd0ï¼Œä½¿ç”¨ncå‘é€åˆ°192.168.1.8:3333
cat /dev/mtd0 | nc 192.168.1.8 3333
```

#### 3. åˆ·æ”¹ç‰ˆubootå¹¶åˆ·å›ºä»¶

æ”¹ç‰ˆubootåŠŸèƒ½è¯¦ç»†ä»‹ç»ï¼š[mt798x uboot åŠŸèƒ½ä»‹ç» (hanwckf.top)](https://cmi.hanwckf.top/p/mt798x-uboot-usage/)
- å¦‚æœä½¿ç”¨åŸç‰ˆubootï¼Œåˆ™å›ºä»¶å¤§å°æœ€å¤šåªèƒ½ä½¿ç”¨36MBï¼Œæ”¹ç‰ˆæ”¯æŒ108MB
- æ”¯æŒwebuiæ–¹ä¾¿åˆ·å›ºä»¶

æ­¥éª¤
- ä¸Šä¸€æ­¥å¼€å¯telnetåï¼Œæ­£å¸¸é‡å¯ç³»ç»Ÿ
- telnetè¿æ¥è·¯ç”±å™¨ï¼Œrootç”¨æˆ·åï¼Œå¯†ç ä¸ºä¸Šä¸€æ­¥ä¿®æ”¹çš„å¯†ç 
- æœ¬åœ°pythonæ­å»ºä¸€ä¸ªhttpæœåŠ¡ï¼Œè·¯ç”±å™¨ä¸Šé€šè¿‡wgetä¸‹è½½æ”¹ç‰ˆuboot
- åˆ·å†™
  ```
  mtd write 360t7-fip-fixed-parts.bin fip
  ```
- æŒ‰ä½reseté”®ï¼Œæ’ä¸Šè·¯ç”±å™¨ç”µæºï¼Œä¿æŒ3ç§’å·¦å³ï¼Œç¯å˜ä¸ºç»¿è‰²
- è®¾ç½®é™æ€ip 192.168.1.2ï¼Œå³å¯æ‰“å¼€è·¯ç”±å™¨webç•Œé¢ã€‚
- é€‰æ‹©å›ºä»¶ä¸Šä¼ å³å¯ï¼ˆéœ€è¦å¯¹åº”æ”¹ç‰ˆubootåˆ†åŒºæ ¼å¼çš„ï¼‰
#### å›ºä»¶é€‰æ‹©

##### mtwifié—­æºé©±åŠ¨

[æ©å±±237å¤§ä½¬å›ºä»¶](https://www.right.com.cn/forum/thread-8263340-1-1.html)
- Hanwckf çš„æºç +18.06è½¯ä»¶åŒ…
- æ”¯æŒ802.11 k/v/ræ— ç¼æ¼«æ¸¸ã€ç¡¬ä»¶ QOSç­‰åŠŸèƒ½
- é€šè¿‡ubootåˆ·å…¥è¿‡ç¨‹ä¸­ï¼Œä¸çŸ¥ä¸ºä½•åˆ·å®Œé‡å¯åç¯ç­äº†ä¸€æ®µæ—¶é—´ã€‚åˆšå¼€å§‹è¿˜ä»¥ä¸ºæ˜¯è¿›ä¸äº†ç³»ç»Ÿï¼Œä½†æ˜¯åé¢å‘ç°æ²¡é—®é¢˜çš„ã€‚
- ç•Œé¢ä¸»é¢˜æ˜¯designï¼Œç¡®å®å¾ˆå¥½çœ‹
- è‡´å‘½é—®é¢˜ï¼šç”±äºæ˜¯è‡ªç¼–è¯‘ï¼Œæ— æ³•å®‰è£…wireguard
- ç¬¬äºŒä¸ªä¸¥é‡é—®é¢˜ï¼šæ²¡æœ‰ä½¿ç”¨wpadï¼Œè€Œæ˜¯ä½¿ç”¨luci-app-mtkç®¡ç†æ— çº¿ï¼Œè¿™å¯¼è‡´é…ç½®FTæ²¡æ³•


![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230818012311.png)

![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230818012256.png)

[hanwckf/immortalwrt-mt798x (github.com)](https://github.com/hanwckf/immortalwrt-mt798x)
- [immortalwrt-mt798xé¡¹ç›®ä»‹ç» (hanwckf.top)](https://cmi.hanwckf.top/p/immortalwrt-mt798x/)

QWRT(lean)
[ã€æ–°æé†’ã€‘æ½˜å¤šæ‹‰ QWRT MT7981 360T7 R23.5.4 é«˜æ€§èƒ½é—­æºå›ºä»¶å‘å¸ƒï¼ˆåŸç”Ÿæ— çº¿é…ç½®ï¼‰-OPENWRTä¸“ç‰ˆ-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8283847-1-1.html)
- luaç•Œé¢
- åŸç‰ˆæ— çº¿é…ç½®

åŠ ç¾¤åï¼Œç¾¤ä¸»å‘Šè¯‰æˆ‘ï¼Œé—­æºé©±åŠ¨åªèƒ½å’Œé—­æºé©±åŠ¨ç»„meshï¼Œå¹¶ä¸”ä¹Ÿä¸å¤ªæ”¯æŒ802.11rã€‚

ImmortalwrtARM
[ã€æ–°æé†’ã€‘ã€2023-08-12ã€‘å°ç±³WR30Ué—­æºé©±åŠ¨immortalwrtå›ºä»¶-å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-5053708-1-1.html)
- [[é¿å‘] 360T7 - V2EX](https://www.v2ex.com/t/930398)åœ¨è¿™é‡Œçœ‹åˆ°è¯´padavanonly/immortalwrtARM FTæ­£å¸¸

##### ä¸ç¡®å®š

[åŸç‰ˆimmortalwrt](https://firmware-selector.immortalwrt.org/?version=23.05.0-rc3&target=mediatek%2Ffilogic&id=qihoo_360t7-ubootmod)
- ä½¿ç”¨äº†ä¸‹å‘ç°wanå£è®¾ç½®dhcpåˆšå¼€å§‹æ€»æœ‰é—®é¢˜ï¼Œè™½ç„¶æœ€åé€šè¿‡æ‰‹åŠ¨é‡å¯dnsmasqæ–¹å¼è§£å†³äº†ï¼Œä½†æ˜¯ç¡®å®ä¸æ˜¯å¾ˆé¡ºåˆ©ã€‚


è‡ªç¼–è¯‘

å¤§ä½¬ä½ å¥½ã€‚æˆ‘è´­ä¹°äº† 360T7 å’Œ wr30u æ¥å¯¹å®¶ä¸­ç½‘ç»œè¿›è¡Œå‡çº§ã€‚ä½†æ˜¯ç”±äºè¿™ä¸¤ä¸ªéƒ½æ²¡æœ‰å®˜æ–¹ openwrt æ”¯æŒï¼Œæˆ‘ç”¨çš„éƒ½æ˜¯åˆ«äººç¼–è¯‘çš„ç‰ˆæœ¬ã€‚
360T7 ç”¨çš„æ˜¯è¿™ä¸ª[hanwckf/immortalwrt-mt798x (github.com)]( https://github.com/hanwckf/immortalwrt-mt798x)ï¼Œä½†æ˜¯å®ƒçš„æ— é™é…ç½®æ˜¯ luci-app-mtk ï¼Œæˆ‘æ‰¾ä¸åˆ° 802.11r çš„é…ç½®é€‰é¡¹ã€‚
wr30u ç”¨çš„æ˜¯è¿™ä¸ª https://www.right.com.cn/forum/thread-8284824-1-1.html ï¼Œå®ƒæœ‰ 802.11r ä½†æ˜¯å´å•¥éƒ½ä¸èƒ½è®¾ç½®ï¼Œæˆ‘æŸ¥çœ‹æ—¥å¿—çœ‹åˆ° FT ä¼šæœ‰ The PMKID is invalid é”™è¯¯ã€‚ç°è±¡å°±æ˜¯è¿ä¸Šå®ƒä¹‹åå‹æ ¹ä¸ä¼šæ¼«æ¸¸ï¼Œç”šè‡³å¼ºåº¦ä½äº-80db äº†éƒ½ä¸ä¼šï¼Œåªèƒ½æ‰‹åŠ¨æ–­å¼€ wifi é‡è¿ã€‚

çœ‹åˆ°ä½ æµ‹è¯•äº†æ— çº¿å¼€æºå’Œé—­æºçš„å›ºä»¶ï¼Œæˆ‘æƒ³é—®ä¸‹å¼€æºçš„å›ºä»¶åœ¨é‚£æ‰¾ã€‚æˆ‘ä¸éœ€è¦æœ€å¼ºçš„æ€§èƒ½ï¼Œæˆ‘åªæƒ³è¦å®ƒçš„è®¾ç½®å’Œå®˜æ–¹ openwrt ä¸€æ ·ï¼Œå¯ä»¥ä¸€èµ·å·¥ä½œå°±è¡Œã€‚ğŸ˜­

æ³¨ï¼šå®¶ä¸­ç½‘ç»œåŸæœ¬æ˜¯ ax6s(åš ac ï¼‰+3 R3g ï¼ˆ ap ï¼‰ï¼Œ802.11r å·¥ä½œå¾—å¾ˆæ­£å¸¸ã€‚




### å°ç±³WR30U

#### åˆ·æœº

ä¸€ä¸ªæ¯”è¾ƒå¹¿æ³›çš„æ•™ç¨‹ï¼š[å°ç±³ WR30U è§£é” SSH åˆ· openwrtï¼Œæœ€æœ‰æ€§ä»·æ¯”çš„ç™¾å…ƒè·¯ç”±å™¨ (qust.me)](https://blog.qust.me/wr30u)

è¿™é‡Œçš„ubootç”¨çš„æ˜¯å“ªä¸ªä¸æ¸…æ¥šï¼Œä¸æ˜¯


æ¢å¤ubootï¼š[ã€æ–°æé†’ã€‘å°ç±³WR30U æ¢å¤åŸå‚å›ºä»¶çš„å‡ ç§æ–¹æ³•-å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8291160-1-1.html)

#### å›ºä»¶

- QWRT
[ã€æ–°æé†’ã€‘æ½˜å¤šæ‹‰ QWRT MT7981 å°ç±³ WR30U è”é€šç‰ˆ é«˜æ€§èƒ½é—­æºå›ºä»¶å‘å¸ƒï¼ˆåŸç”Ÿæ— çº¿é…ç½®ï¼‰-OPENWRTä¸“ç‰ˆ-æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8284824-1-1.html)


[X-Wrt, for IoT, a custom Distribution for OpenWrt](https://x-wrt.com/)
### FT

[OpenWRT è·¯ç”±å™¨å¿«é€Ÿæ¼«æ¸¸ï¼ˆ802.11rï¼‰é…ç½®æ•™ç¨‹ä»¥åŠæ·±åº¦è§£æ_è·¯ç”±å™¨_ä»€ä¹ˆå€¼å¾—ä¹° (smzdm.com)](https://post.smzdm.com/p/a6lr03wg/)
```

```

```
Thu Aug 17 11:31:19 2023 kern.warn kernel: [164938.908390] 7981@C13L2,MacTableInsertEntry() 1537: New Sta:2a:85:8f:ff:be:e3
Thu Aug 17 11:31:19 2023 kern.err kernel: [164938.915643] 7981@C14L1,FT_AuthReqHandler() 536: The MDIE is invalid(Peer MDID= 17 17, My MDID = 82 84
Thu Aug 17 11:31:22 2023 kern.notice kernel: [164942.301972] 7981@C08L3,ap_peer_auth_req_at_idle_action() 717: AUTH - MBSS(1), Rcv AUTH seq#1, Alg=2, Status=0 from [wcid=1]2a:85:8f:ff:be:e3
Thu Aug 17 11:31:22 2023 kern.err kernel: [164942.314678] 7981@C14L1,FT_AuthReqHandler() 536: The MDIE is invalid(Peer MDID= 17 17, My MDID = 82 84
Thu Aug 17 11:31:26 2023 kern.notice kernel: [164945.762095] 7981@C08L3,ap_peer_auth_req_at_idle_action() 717: AUTH - MBSS(1), Rcv AUTH seq#1, Alg=2, Status=0 from [wcid=1]2a:85:8f:ff:be:e3
Thu Aug 17 11:31:26 2023 kern.err kernel: [164945.774793] 7981@C14L1,FT_AuthReqHandler() 536: The MDIE is invalid(Peer MDID= 17 17, My MDID = 82 84
Thu Aug 17 11:31:32 2023 kern.warn kernel: [164952.375145] 7981@C01L2,wifi_sys_disconn_act() 1002:  wdev_idx=1
Thu Aug 17 11:31:32 2023 kern.warn kernel: [164952.381500] 7981@C13L2,MacTableDeleteEntry() 1793: Del Sta:2a:85:8f:ff:be:e3
```

å®¢å…r3g
```
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-AUTHENTICATE.indication(2a:85:8f:ff:be:e3, OPEN_SYSTEM)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: authenticated
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: association OK (aid 1)
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: associated (aid 1)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-ASSOCIATE.indication(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: binding station to interface 'wlan1'
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: event 1 notification
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: start authentication
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.1X: unauthorizing port
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: sending 1/4 msg of 4-Way Handshake
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: received EAPOL-Key frame (2/4 Pairwise)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: sending 3/4 msg of 4-Way Handshake
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: received EAPOL-Key frame (4/4 Pairwise)
Thu Aug 17 11:30:05 2023 daemon.notice hostapd: wlan1: AP-STA-CONNECTED 2a:85:8f:ff:be:e3
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.1X: authorizing port
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 RADIUS: starting accounting session CDB345D82723F2E1
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: pairwise key handshake completed (RSN)
Thu Aug 17 11:30:05 2023 daemon.notice hostapd: wlan1: EAPOL-4WAY-HS-COMPLETED 2a:85:8f:ff:be:e3

Thu Aug 17 11:36:38 2023 daemon.notice hostapd: wlan1: AP-STA-DISCONNECTED 2a:85:8f:ff:be:e3
Thu Aug 17 11:36:38 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: disassociated due to inactivity
Thu Aug 17 11:36:38 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DISASSOCIATE.indication(2a:85:8f:ff:be:e3, 4)
Thu Aug 17 11:36:38 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
Thu Aug 17 11:36:39 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: deauthenticated due to inactivity (timer DEAUTH/REMOVE)
Thu Aug 17 11:36:39 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DEAUTHENTICATE.indication(2a:85:8f:ff:be:e3, 2)
Thu Aug 17 11:36:39 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
```

op3(ax6s)
```
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: binding station to interface 'wlan1'
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: authentication OK (FT)
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-AUTHENTICATE.indication(2a:85:8f:ff:be:e3, FT)
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: association OK (aid 1)
Thu Aug 17 11:30:57 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: associated (aid 1)
Thu Aug 17 11:30:57 2023 daemon.notice hostapd: wlan1: AP-STA-CONNECTED 2a:85:8f:ff:be:e3
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-REASSOCIATE.indication(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: binding station to interface 'wlan1'
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: event 6 notification
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: FT authentication already completed - do not start 4-way handshake
```
#### å…¶å®ƒ

åŸå‚ç³»ç»Ÿ
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141433.png)
æ”¯æŒçš„åŠŸèƒ½
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141449.png)

ä»å’¸é±¼ä¸Šä¹°çš„ï¼Œè·¯ç”±å™¨ç³»ç»Ÿé‡Œå¯ä»¥çœ‹åˆ°1æœˆä»½çš„æ—¥å¿—ã€‚
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141342.png)

ubootæ§åˆ¶å°
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141529.png)

![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141559.png)

webuiåˆ·æœºæ—¶ä¸²å£è¾“å‡º
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141615.png)


## ç¡¬ä»¶æ€§èƒ½æµ‹è¯•(wgå¸¦å®½)

### king3399

æœªåŠ å¯†
```
root@op1 âœ  ~ iperf3 -c 114.214.236.90

[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.10 GBytes   943 Mbits/sec   70             sender
[  5]   0.00-10.05  sec  1.09 GBytes   936 Mbits/sec                  receiver

root@op1 âœ  ~ iperf3 -c king6.yfycloud.top
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.08 GBytes   924 Mbits/sec   29             sender
[  5]   0.00-10.04  sec  1.07 GBytes   918 Mbits/sec                  receiver
```

wg
```
âœ  ~ iperf3 -c king
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.04 GBytes   893 Mbits/sec  70559             sender
[  5]   0.00-10.04  sec  1.04 GBytes   887 Mbits/sec                  receiver

âœ  ~ iperf3 -c king -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.04  sec   691 MBytes   577 Mbits/sec    2             sender
[  5]   0.00-10.00  sec   688 MBytes   577 Mbits/sec                  receiver
```

### p2w

æœªåŠ å¯†ï¼Œå±…ç„¶è·‘ä¸æ»¡åƒå…†ï¼ˆè¿æ¥ä¸­é—´é€šè¿‡äº†ä¸€ä¸ªusb åƒå…†ç½‘å¡ï¼‰
```
âœ  ~ iperf3 -c p2w
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec   754 MBytes   633 Mbits/sec  344             sender
[  5]   0.00-10.00  sec   752 MBytes   630 Mbits/sec                  receiver

âœ  ~ iperf3 -c p2w -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.01  sec   902 MBytes   757 Mbits/sec  738             sender
[  5]   0.00-10.00  sec   902 MBytes   757 Mbits/sec                  receiver
```

### ax6s

æœªåŠ å¯†ï¼ˆä¸­é—´æ˜¯ä¸€ä¸ªusbåƒå…†ç½‘å¡ï¼‰
```
(base) yfy@Tianyi âœ  ~ iperf3 -c 192.168.36.2
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.10 GBytes   942 Mbits/sec    0             sender
[  5]   0.00-10.01  sec  1.09 GBytes   939 Mbits/sec                  receiver

(base) yfy@Tianyi âœ  ~ iperf3 -c 192.168.36.2 -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.09 GBytes   940 Mbits/sec    0             sender
[  5]   0.00-10.00  sec  1.09 GBytes   939 Mbits/sec                  receiver
```

wg
å¤ç”¨ä¹‹å‰çš„homeåˆ°å­¦æ ¡æ•°æ®
baselineï¼šipv6ç›´è¿
```
homeä¸‹è½½
[SUM]   0.00-10.00  sec   798 MBytes   669 Mbits/sec  468             sender
[SUM]   0.00-10.05  sec   786 MBytes   656 Mbits/sec                  receiver

homeä¸Šä¼ 
[SUM]   0.00-10.06  sec   925 MBytes   771 Mbits/sec  1185             sender
[SUM]   0.00-10.00  sec   918 MBytes   770 Mbits/sec                  receiver
```

```
âœ  ~ iperf3 -c op3
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec   163 MBytes   137 Mbits/sec    0             sender
[  5]   0.00-10.05  sec   161 MBytes   134 Mbits/sec                  receiver

âœ  ~ iperf3 -c op3 -P 5
[SUM]   0.00-10.00  sec   537 MBytes   450 Mbits/sec  302             sender
[SUM]   0.00-10.06  sec   525 MBytes   438 Mbits/sec                  receiver

âœ  ~ iperf3 -c op3 -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.05  sec   235 MBytes   196 Mbits/sec  170             sender
[  5]   0.00-10.00  sec   234 MBytes   196 Mbits/sec                  receiver

âœ  ~ iperf3 -c op3 -R -P 5
[SUM]   0.00-10.05  sec   504 MBytes   421 Mbits/sec    0             sender
[SUM]   0.00-10.00  sec   497 MBytes   417 Mbits/sec                  receiver
```
ææ€–çš„CPUå ç”¨
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230810160001.png)
