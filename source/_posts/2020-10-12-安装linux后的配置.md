---
title: 安装linux后的配置
date: 2020-10-11 23:05:13
tags:
---

[TOC]

## 概述

不想每次配置linux都需要重新去搜索，因此在自己平时折腾时顺便记录一下（长期更新）

<!--more-->

## 常用软件

### 中文输入法

如果安装系统时选择了中文，则自带一个中文输入法。而如果选择了英文，后面想改成中文。可以：
1. 将设置中的**区域和语言**改为中文。
2. 打开**language support**，第一次打开会显示语言支持没有完全安装，会安装中文字体等。

下载谷歌拼音输入法

```bash
sudo apt-get install fcitx-googlepinyin
```

然后在language support中将Keyboard input method从默认的iBus改成fcitx，重启电脑。

### "桌面"改为"Desktop"

#### ubuntu

```bash
export LANG=en_US
xdg-user-dirs-gtk-update
```

选择更新名称

```
export LANG=zh_CN
xdg-user-dirs-gtk-update
```

选择保留名称，并不再提醒

### 代理

- 使用qv2ray
  1. 在github上下载qv2ray, v2ray
  2. 配置qv2ray core
  3. 导入链接

  具体参考[https://qv2ray.net/getting-started/](https://qv2ray.net/getting-started/)
  
  > 注：目前版本(2.6.3)，在设置开机自启动后，右上角的qv2ray图标会消失，导致无法断开连接非常麻烦。解决办法为取消开机自启动并重新安装（数据仍然会保留，故不必担心。卸载后需要重启或注销一下账户，然后才能重装，否则仍然不显示）

### 谷歌浏览器

- 使用chromium（chromium也可以使用google帐号进行同步）

    ```bash
    sudo apt install chromium-browser
    ```

- 使用google chrome

    ```bash
    wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
    cd /path
    sudo apt install ./google-chrome-stable_current_amd64.deb
    ```

### qq

```bash
wget -O- https://deepin-wine.i-m.dev/setup.sh | sh
sudo apt-get install deepin.com.qq.im
```

### VS Code

https://code.visualstudio.com/docs/setup/linux

1. download deb

   [Download Visual Studio Code - Mac, Linux, Windows](https://code.visualstudio.com/Download)

   ```bash
   sudo apt install ./<file>.deb
   ```

2. add apt repo

   ```bash
   sudo apt install software-properties-common apt-transport-https wget
   wget -q https://packages.microsoft.com/keys/microsoft.asc -O- | sudo apt-key add -
   sudo add-apt-repository "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main"
   
   sudo apt update
   sudo apt-get -o Acquire::http::proxy="socks5h://127.0.0.1:1089/" install code #约70MB
   ```

3. snap or Ubuntu software

   软件占用空间更大

## 命令行

### vim等软件配置

从[https://github.com/TheRainstorm/my-vim-config](https://github.com/TheRainstorm/my-vim-config) clone代码

将其中的basic目录复制到home目录

```repo
cp my-vim-config/basic/* ~/
```

其中.vim/vimrc配置文件便会生效。

该仓库还包含git, ssh的配置文件

### zsh

#### 安装zsh并设置为默认shell

>注：安装oh-my-zsh时会自动将zsh设置为默认shell，故第一步可以省略

```bash
sudo apt install zsh  #安装zsh，换源参考[1]

chsh #设置zsh为默认
Password:
Changing the login shell for rain
Enter the new value, or press ENTER for the default
        Login Shell [/bin/zsh]: /bin/zsh
```

#### 安装oh-my-zsh并安装插件

```bash
sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)"
```

tips:
1. 安装oh-my-zsh会使用git克隆仓库，请提前安装git并设置代理
2. 如果连接不上raw.github.com可以尝试更换DNS。更保险的还是给bash设置代理

##### [zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions)

作用：自动提示命令

```bash
git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions
```

在.zshrc中plugin行添加zsh-autosuggestions，即

```bash
plugins=(git zsh-autosuggestions)
```

##### [zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting)

作用：命令高亮，正确的命令显示绿色，错误的显示为红色

```bash
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting
echo "source $ZSH_CUSTOM/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" >> ${ZDOTDIR:-$HOME}/.zshrc
```

##### [autojump](https://github.com/wting/autojump)

作用：j直接跳转到任意一个目录

```bash
git clone git://github.com/wting/autojump.git $ZSH_CUSTOM/plugins/autojump

cd $ZSH_CUSTOM/plugins/autojump
./install.py or ./uninstall.py	#如果系统只识别python3，可以设置软链接python指向python3。或者python3 install.py

#将install.py结尾输出复制到.zshrc中
```

按照install.py输出提示，复制对应代码到zshrc中

##### bash_aliases

让bash和zsh共用同一个alias配置文件。在zshrc中添加

```sh
if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi
```

## 美化

### Ubuntu

- dock栏

  在设置->外观中设置dock栏为**底部**、**自动隐藏**，并设置合适的大小。

- 背景图

  暂时还没有找到比较好的轮播图片的方法

- gnome-terminal

  设置背景颜色和透明度

## 常用操作参考

### apt相关

#### apt换源

```bash
cp /etc/apt/sources.list /etc/apt/sources.list.back	#备份
sed -i "s/archive.ubuntu.com/mirrors.aliyun.com/g" /etc/apt/sources.list
```

[aliyun mirror ubuntu](https://developer.aliyun.com/mirror/ubuntu)

#### apt-get临时使用sock代理

```bash
sudo apt-get -o Acquire::http::proxy="socks5h://127.0.0.1:1089/" install typora
```

### bash设置代理

```bash
#端口对应qv2ray软件默认设置
export HTTP_PROXY=http://localhost:8889
export HTTPS_PROXY=http://localhost:8889
```

```bash
unset HTTP_PROXY
unset HTTPS_PROXY
```


### git设置代理

```bash
git config --global https.proxy http://127.0.0.1:1080
git config --global https.proxy https://127.0.0.1:1080
git config --global http.proxy 'socks5://127.0.0.1:1080'
git config --global https.proxy 'socks5://127.0.0.1:1080'
```

[git doc: http.proxy](https://git-scm.com/docs/git-config#Documentation/git-config.txt-httpproxy)

### 恢复默认.bashrc

- 在ubuntu中，默认的bashrc文件存储在 `/etc/skel/.bashrc`

### vim复制粘贴（系统剪贴板）

1. 首先确认vim是否开启了clipboard功能

   ```bash
   vim --version |grep clipboard #如果显示出-clipboard则需要重装vim
   ```

   如果没有则重装

   ```bash
   sudo apt remove vim
   sudo apt install vim-gtk
   ```

2. 使用鼠标选中内容，输入`"+y`命令便可将内容复制到剪贴板。

   使用`"+p`将剪贴板内容到当前位置。

   或者

    然后在.vim/vimrc中设置快捷键ctrl-c, ctrl-v。

    ```
    "clipboard
    map <C-c> "+y<CR>
    map <C-v> "+p<CR>
    ```

    此时便可以在选中内容时按ctrl-c复制到系统剪切板。处于normal模式时ctrl-v粘贴了。

#### 解释

vim中包含许多不同功能的寄存器，用于存储在vim中复制的内容。可以通过:reg命令查看vim中各寄存器的值

```
:reg	#查看vim中的寄存器

    ""      // 默认unnamed寄存器，最近一次"d","c","s","x","y"复制，删除，修改内容
    "0      // 最近一次"y"复制内容
    "1      // 最近一次"d","c","s","x"删除，修改内容
    "2      // 上一次"d","c","s","x"删除，修改内容，[3-9]类推
    "a      // 字母寄存器，供用户指定使用，比如"ay就是复制到"a寄存器，[b-z]类推
    "-      // 少于一行的"d","c","x"删除内容
    ".      // 只读寄存器
    ":      // 只读寄存器
    "%     	// 只读寄存器
    "#     	// 只读寄存器

    "+      // 映射系统剪贴板 (有的默认设置不支持)
    "*      // 映射系统剪贴板 (有的默认设置不支持)
```

vim默认复制到的寄存器是`""`寄存器，要想复制到系统剪切板，可以通过`"+`寄存器（需要vim开启clipboard功能）

在选中内容的情况下，按`y`默认将内容复制到`""`寄存器。按`p`默认将`""`寄存器内容复制到当前位置。要想复制到指定寄存器，输入寄存器名+y即可，粘贴时同理。